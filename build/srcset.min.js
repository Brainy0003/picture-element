(function(e,t){function c(e,n,r){function d(){b(),this.width=e,this.height=n,this.density=r,t.addEventListener("resize",v,!1),a=!0,L("ready")}function v(){var e=t.innerWidth,n=t.innerHeight,r=t.devicePixelRatio||1;w(e,n,r)}function m(){function e(){this.width=i,this.height=s,this.density=o,this.viewport=l}return new e}function g(e,n,r){w(e,n,r),f||(t.removeEventListener("resize",v,!1),f=!0,L("lockchange"))}function y(){f&&(t.addEventListener("resize",v,!1),f=!1,L("lockchange"))}function b(){var e;u=t.document.querySelector("head > meta[name=viewport]"),u||(u=document.createElement("meta"),u.setAttribute("name","viewport"),document.head.appendElement(u))}function w(e,n,r){var a=parseInt(e,10)||i||t.innerWidth,f=parseInt(n,10)||s||t.innerHeight,l=parseFloat(r)||t.devicePixelRatio||1,c=!1;a!==i&&(i=a,c=!0),f!==s&&(s=f,c=!0),l!==o&&(o=l,c=!0),u&&c&&(t.document.readyState!=="complete"&&E(),L("change"))}function E(){var e="";e+=isNaN(i)?"":"width="+i+",",e+=isNaN(s)?"":"height="+s+",",e+=isNaN(o)?"":"target-densitydpi="+o,/,$/.test(e)&&(e=e.substr(0,e.length-1)),u.content=e}function S(e){w(e,s,o)}function x(e){w(i,e,o)}function T(e){w(i,s,e)}function N(){return s}function C(){return o}function k(){return i}function L(e){var t=document.createEvent("CustomEvent");t.initEvent(e,!1,!1,null),h.dispatchEvent(t)}if(!(this instanceof c))return new Viewport;var i,s,o,u,a=!1,f=!1,l=this,h=t.document.createElement("x-dispatcher"),p;p={height:{get:N,set:x},width:{get:k,set:S},density:{get:C,set:T},dimensions:{value:m},on:{value:function(e,t){h.addEventListener(e,t,!1)}},removeListener:{value:function(e,t){h.removeEventListener(e,t,!1)}},ready:{get:function(){return a}},lock:{value:g},unlock:{value:y},locked:{get:function(){return f}}},Object.defineProperties(this,p),d.call(this)}var n=decodeURIComponent(t.location),r=n.split("?")[1],i={},s,o,u,a;for(var f,l=r.split("&");l.length>0;)f=l.pop().split("="),f.length===2&&(i[f[0]]=f[1]);o=parseInt(i.vpwidth,10),u=parseInt(i.vpheight,10),a=parseFloat(i.vpdensity),s=new c(o,u,a),Boolean(i.vplocked)&&s.lock(o,u,a),Object.defineProperty(e,"customViewport",{get:function(){return s}})})(this,window),function(e){function i(e){e=String(e);var n=e.length,r=0,i=t.whitespace;for(;r<n;r++)if(i.indexOf(e[r])===-1)return r;return n}function s(e){var n=0,r=[],s=e.length,o="",u=t.whitespace;n=i(e);while(n<s)u.indexOf(e[n])===-1?(o+=e[n++],n===s&&r.push(o)):(r.push(o),o="",n+=i(e.substr(n,s)));return r}function o(e,t,n){var r="",i=e.length;while(t<i&&n.test(e[t]))r+=e[t++];return{result:r,position:t}}function u(e){var n=t.parseInteger(e);return n<0?new Error("Invalid input"):n}function a(e){var n=0,s="positive",o=e.length-1,u,a=0;n=i(e);if(n>o)return new Error("Invlid input");if(e[n]==="-"){s="negative",n++;if(n>o)return new Error("Invlid input")}else if(e[n]==="+"){n++;if(n>o)return new Error("Invlid input")}return r.test(e[n])?(u=t.collectCharacters(e,n,r),n=u.position,a=parseInt(u.result,10),s==="positive"?a:0-a):new Error("Invlid input")}function f(e){return window.console.warn("Using ECMAScript parse float, as the HTML one is not done yet"),window.parseFloat(e)}var t={},n=" 	\n\f\r",r=/^[0-9]$/;Object.defineProperty(e,"HTML",{get:function(){return t}}),Object.defineProperty(t,"whitespace",{get:function(){return n}}),Object.defineProperty(t,"ASCIIDigits",{get:function(){return r}}),Object.defineProperty(t,"collectCharacters",{value:o}),Object.defineProperty(t,"skipWhiteSpace",{value:i}),Object.defineProperty(t,"splitStringOnSpaces",{value:s}),Object.defineProperty(t,"parseNonNegInt",{value:u}),Object.defineProperty(t,"parseInteger",{value:a}),Object.defineProperty(t,"parseFloat",{value:f})}(this),function(e,t,n){"use strict";function o(){}function u(e){var n=e.value;if(e instanceof t.Attr){var r=0,i,o=n.length,u=[];while(r<o){r+=s.skipWhiteSpace(n.substr(r,o));for(var f=s.whitespace,l="",c;r<o;r++){c=n[r];if(f.indexOf(c)!==-1)break;l+=c}if(l.length===0)return a(u,e);for(i="";r<o;r++){if(n[r]===","){r++;break}i+=n[r]}u.push({url:l,descriptors:i})}return a(u,e)}throw new TypeError("Invalid input")}function a(e,i){function b(e){function r(e,t){for(var n in e)if(n!=="url"&&String(e[n])!==String(t[n]))return!1;return!0}if(e.length>1)for(var t=0;t<=e.length;t++)for(var n=e.length-1;n>t;n--)t!==n&&r(e[t],e[n])&&e.splice(n,1);return e}function w(e,t){var n=/^\d+\u0077$/,r=/^\d+\u0068$/,i=/^[\-\+]?[0-9]*\.?[0-9]+([eE][\-\+]?[0-9]+)?\u0078$/;n.test(e)?(d!==null&&(p=!0),d=s.parseNonNegInt(e)):r.test(e)?(v!==null&&(p=!0),v=s.parseNonNegInt(e)):i.test(e)&&(m!==null&&(p=!0),m=s.parseFloat(e)),p||o.push(new E(t,d,v,m))}function E(e,t,n,r){this.url=e,this.width=t||Infinity,this.height=n||Infinity,this.density=r||1}function S(e,t,n){if(t.length>1){for(var r=0,i=t[r+1],s=t[r];r<t.length;r++)t[r].hasOwnProperty(e)&&t[r][e]<n&&(s=i&&i[e]>s[e]?i:s,t.splice(r--,1),i=t[r+1]);t.length===0&&t.unshift(s)}}function x(e,t){if(t.length>1)for(var n=0,r=t[0];n<t.length;n++)t[n].hasOwnProperty(e)&&!!t[n+1]&&(t[n+1][e]>r[e]?(t.splice(n+1,1),n--):t[n+1][e]!==r[e]&&(r=t[n+1],t.splice(n--,1)))}var o=[],u,a,f;for(var l=0,c=e.length;l<c;l++){var h=s.splitStringOnSpaces(e[l].descriptors),p=!1,d=null,v=null,m=null;for(var g=0,y=h.length;g<y;g++)w(h[g],e[l].url)}return i.ownerElement.hasAttribute("src")&&i.ownerElement.getAttribute("src")!==""&&o.push(new E(i.ownerElement.getAttribute("src"))),o.length===0?{url:null,density:undefined}:(b(o),u=n.width,a=n.height,f=n.density,S("width",o,u),S("height",o,a),S("density",o,f),["width","height","density"].forEach(function(e){x(e,o)}),o.length>1&&r&&t.console.warn("there was more than one candidate?",o),{url:o[0].url,density:o[0].density})}var r=!0,i=new o,s=t.HTML;Object.defineProperty(o.prototype,"parse",{value:u}),Object.defineProperty(e,"srcsetParser",{get:function(){return i}})}(this,window,window.customViewport);